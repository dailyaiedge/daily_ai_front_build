import{r as t,_ as w,R as d,b as g,c as k,P as n,j as e,B as S}from"./index-CMcFrDL9.js";import{C as me,F as re,f as ue,a as fe}from"./index-CsH1AieM.js";import{e as he,u as pe}from"./data.service-DQ6lCNo9.js";import{h as ve}from"./moment-C5S46NFB.js";import{C as be,a as xe}from"./CRow-CMaR-O3i.js";import{C as Ce,a as ye}from"./CCardBody-C538HF6H.js";import{C as ge}from"./CCardHeader-DbXUXhGN.js";import{C as Ne}from"./CFormInput-CmSGAo5q.js";import{C as je,a as we,b as ne,c as E,d as ke,e as R}from"./CTable-DdKVN-mi.js";import{a as F}from"./index.esm-iVj-foLa.js";import{C as Ee}from"./CFormSelect-C_LA8bkh.js";import{u as Re,T as Te,a as te,b as Me,e as Oe}from"./DefaultLayout-C_6ZmauU.js";import"./auth.service-DWc0y9l9.js";var I=t.forwardRef(function(s,o){var l=s.children,a=s.className,c=w(s,["children","className"]);return d.createElement("div",g({className:k("modal-content",a)},c,{ref:o}),l)});I.propTypes={children:n.node,className:n.string};I.displayName="CModalContent";var Y=t.forwardRef(function(s,o){var l,a=s.children,c=s.alignment,i=s.className,h=s.fullscreen,f=s.scrollable,v=s.size,N=w(s,["children","alignment","className","fullscreen","scrollable","size"]);return d.createElement("div",g({className:k("modal-dialog",(l={"modal-dialog-centered":c==="center"},l[typeof h=="boolean"?"modal-fullscreen":"modal-fullscreen-".concat(h,"-down")]=h,l["modal-dialog-scrollable"]=f,l["modal-".concat(v)]=v,l),i)},N,{ref:o}),a)});Y.propTypes={alignment:n.oneOf(["top","center"]),children:n.node,className:n.string,fullscreen:n.oneOfType([n.bool,n.oneOf(["sm","md","lg","xl","xxl"])]),scrollable:n.bool,size:n.oneOf(["sm","lg","xl"])};Y.displayName="CModalDialog";var oe=t.createContext({}),q=t.forwardRef(function(s,o){var l=s.children,a=s.alignment,c=s.backdrop,i=c===void 0?!0:c,h=s.className,f=s.container,v=s.duration,N=v===void 0?150:v,b=s.focus,B=b===void 0?!0:b,T=s.fullscreen,D=s.keyboard,j=D===void 0?!0:D,M=s.onClose,L=s.onClosePrevented,z=s.onShow,O=s.portal,H=O===void 0?!0:O,r=s.scrollable,x=s.size,u=s.transition,p=u===void 0?!0:u,C=s.unmountOnClose,le=C===void 0?!0:C,V=s.visible,ae=w(s,["children","alignment","backdrop","className","container","duration","focus","fullscreen","keyboard","onClose","onClosePrevented","onShow","portal","scrollable","size","transition","unmountOnClose","visible"]),Q=t.useRef(null),P=t.useRef(null),ce=t.useRef(null),ie=Re(o,P),U=t.useState(V),y=U[0],A=U[1],X=t.useState(!1),Z=X[0],$=X[1],de={visible:y,setVisible:A};t.useEffect(function(){A(V)},[V]),t.useEffect(function(){var m;return y?(Q.current=document.activeElement,document.addEventListener("mouseup",ee),document.addEventListener("keydown",se)):(m=Q.current)===null||m===void 0||m.focus(),function(){document.removeEventListener("mouseup",ee),document.removeEventListener("keydown",se)}},[y]);var _=function(){return i==="static"?$(!0):(A(!1),M&&M())};t.useLayoutEffect(function(){L&&L(),setTimeout(function(){return $(!1)},N)},[Z]),t.useLayoutEffect(function(){return y?(document.body.classList.add("modal-open"),i&&(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"),setTimeout(function(){var m;B&&((m=P.current)===null||m===void 0||m.focus())},p?N:0)):(document.body.classList.remove("modal-open"),i&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))),function(){document.body.classList.remove("modal-open"),i&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))}},[y]);var ee=function(m){P.current&&P.current==m.target&&_()},se=function(m){m.key==="Escape"&&j&&_()};return d.createElement(d.Fragment,null,d.createElement(Te,{in:y,mountOnEnter:!0,nodeRef:P,onEnter:z,onExit:M,unmountOnExit:le,timeout:p?N:0},function(m){return d.createElement(te,{container:f,portal:H},d.createElement(oe.Provider,{value:de},d.createElement("div",g({className:k("modal",{"modal-static":Z,fade:p,show:m==="entered"},h),tabIndex:-1},y?{"aria-modal":!0,role:"dialog"}:{"aria-hidden":"true"},{style:g({},m!=="exited"&&{display:"block"})},ae,{ref:ie}),d.createElement(Y,{alignment:a,fullscreen:T,scrollable:r,size:x},d.createElement(I,{ref:ce},l)))))}),i&&d.createElement(te,{container:f,portal:H},d.createElement(Me,{visible:y})))});q.propTypes={alignment:n.oneOf(["top","center"]),backdrop:n.oneOfType([n.bool,n.oneOf(["static"])]),children:n.node,className:n.string,container:n.any,duration:n.number,focus:n.bool,fullscreen:n.oneOfType([n.bool,n.oneOf(["sm","md","lg","xl","xxl"])]),keyboard:n.bool,onClose:n.func,onClosePrevented:n.func,onShow:n.func,portal:n.bool,scrollable:n.bool,size:n.oneOf(["sm","lg","xl"]),transition:n.bool,unmountOnClose:n.bool,visible:n.bool};q.displayName="CModal";var K=t.forwardRef(function(s,o){var l=s.children,a=s.className,c=w(s,["children","className"]);return d.createElement("div",g({className:k("modal-body",a)},c,{ref:o}),l)});K.propTypes={children:n.node,className:n.string};K.displayName="CModalBody";var W=t.forwardRef(function(s,o){var l=s.children,a=s.className,c=w(s,["children","className"]);return d.createElement("div",g({className:k("modal-footer",a)},c,{ref:o}),l)});W.propTypes={children:n.node,className:n.string};W.displayName="CModalFooter";var G=t.forwardRef(function(s,o){var l=s.children,a=s.className,c=s.closeButton,i=c===void 0?!0:c,h=w(s,["children","className","closeButton"]),f=t.useContext(oe).setVisible;return d.createElement("div",g({className:k("modal-header",a)},h,{ref:o}),l,i&&d.createElement(Oe,{onClick:function(){return f(!1)}}))});G.propTypes={children:n.node,className:n.string,closeButton:n.bool};G.displayName="CModalHeader";var J=t.forwardRef(function(s,o){var l=s.children,a=s.as,c=a===void 0?"h5":a,i=s.className,h=w(s,["children","as","className"]);return d.createElement(c,g({className:k("modal-title",i)},h,{ref:o}),l)});J.propTypes={as:n.elementType,children:n.node,className:n.string};J.displayName="CModalTitle";const Pe=({opened:s,data:o,handleClose:l})=>{const[a,c]=t.useState(!1);return t.useEffect(()=>{c(s)},[s]),e.jsx(e.Fragment,{children:e.jsxs(q,{alignment:"center",visible:a,onClose:()=>{c(!1),l()},children:[e.jsx(G,{children:e.jsx(J,{children:o==null?void 0:o.writer})}),e.jsx(K,{children:o==null?void 0:o.comment}),e.jsx(W,{children:e.jsx(F,{color:"secondary",onClick:()=>{c(!1),l()},children:"Close"})})]})})},We=()=>{const[s,o]=t.useState([]),[l,a]=t.useState(null),[c,i]=t.useState(!1),[h,f]=t.useState(!1),[v,N]=t.useState(""),[b,B]=t.useState(1),[T,D]=t.useState(10),[j,M]=t.useState(1),L=async r=>{let x=new Array;r.forEach(u=>{x.push(u)}),o(x)},z=async()=>{f(!0);try{const r=await he(b,T,v);r.msg==="no-section"?(S.warning("There is no information!"),f(!1)):(await L(r.reviews),M(r.pages),f(!1))}catch(r){S.error(r)}};t.useEffect(()=>{z()},[b,T,v]);const O=async(r,x)=>{try{let u=new FormData;Object.keys(r).forEach(C=>{u.append(C,r[C])}),u.set("visible",x),f(!0);const p=await pe(u);p.msg==="no-section"?(S.warning("There is no information!"),f(!1)):p.msg==="update"&&(S.success("The Review information was updated!"),z())}catch(u){S.error(u.response.data)}},H=()=>{i(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"All Reviews"}),e.jsx(be,{children:e.jsx(xe,{xs:!0,children:e.jsxs(Ce,{className:"mb-4",children:[e.jsx(ge,{children:e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(Ne,{type:"text",placeholder:"Filter by All",onKeyDown:r=>{r.key==="Enter"&&N(r.target.value)},className:"form-control",style:{width:"10rem",left:"0"}})})}),e.jsx(ye,{children:e.jsxs(je,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[e.jsx(we,{className:"text-nowrap",children:e.jsxs(ne,{children:[e.jsx(E,{className:"bg-body-tertiary",children:"Tool"}),e.jsx(E,{className:"bg-body-tertiary",children:"Website"}),e.jsx(E,{className:"bg-body-tertiary text-center",children:"Rating"}),e.jsx(E,{className:"bg-body-tertiary",children:"Writer"}),e.jsx(E,{className:"bg-body-tertiary text-left",children:"Created At"}),e.jsx(E,{className:"bg-body-tertiary text-center",children:"Show/Hide"})]})}),e.jsx(ke,{children:s.map((r,x)=>{var u,p,C;return e.jsxs(ne,{"v-for":"item in tableItems",children:[e.jsx(R,{onClick:()=>{i(!0),a(r)},children:e.jsx("div",{children:(u=r==null?void 0:r.request)==null?void 0:u.name})}),e.jsx(R,{className:"text-center",onClick:()=>{i(!0),a(r)},children:e.jsx("div",{className:"d-flex justify-content-between text-nowrap",children:e.jsx("div",{className:"fw-semibold",children:e.jsx("a",{className:"text-info form-link",target:"_blank",href:(p=r.request)==null?void 0:p.link,children:(C=r.request)==null?void 0:C.link})})})}),e.jsx(R,{className:"text-center",onClick:()=>{i(!0),a(r)},children:e.jsx("div",{children:r==null?void 0:r.rating})}),e.jsx(R,{onClick:()=>{i(!0),a(r)},children:e.jsx("div",{children:r==null?void 0:r.writer})}),e.jsx(R,{onClick:()=>{i(!0),a(r)},children:ve(r.created).format("MMM D, YYYY")}),e.jsx(R,{className:"text-center",children:r.visible?e.jsx(F,{color:"dark",className:"text-light",shape:"rounded-pill",onClick:()=>{O(r,!1)},children:"Hide"}):e.jsx(F,{color:"success",className:"text-light",shape:"rounded-pill",onClick:()=>{O(r,!0)},children:"Show"})})]},x)})})]})}),e.jsx(me,{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsxs(Ee,{value:T,onChange:r=>D(Number(r.target.value)),className:"form-select position-absolute mx-1",style:{width:"5rem",left:"0"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]}),e.jsx(F,{onClick:()=>B(r=>Math.max(r-1,1)),disabled:b===1||j===0,className:"btn btn-secondary mx-2",children:e.jsx(re,{icon:ue})}),e.jsxs("span",{children:["Page ",b," of ",j]}),e.jsx(F,{onClick:()=>B(r=>Math.min(r+1,j)),disabled:b===j||j===0,className:"btn btn-secondary mx-2",children:e.jsx(re,{icon:fe})})]})})]})})}),e.jsx(Pe,{opened:c,data:l,handleClose:H})]})};export{We as default};
