import{r as u,_ as V,R,b as M,c as H,P as q,j as e,B as p,q as U,k as W}from"./index-CMcFrDL9.js";import{h as T}from"./moment-C5S46NFB.js";import{a as z,b as f,C as F,c as x}from"./CFormInput-CmSGAo5q.js";import{f as O,h as G,s as K}from"./data.service-DQ6lCNo9.js";import{C as J,a as Z}from"./CRow-CMaR-O3i.js";import{C as Q,a as X}from"./CCardBody-C538HF6H.js";import{C as _}from"./CCardHeader-DbXUXhGN.js";import{C as ee}from"./CForm-D64YkrWu.js";import{C as h}from"./CInputGroup-BTD7KrO1.js";import{C as E}from"./CFormSelect-C_LA8bkh.js";import{a as P}from"./index.esm-iVj-foLa.js";import"./auth.service-DWc0y9l9.js";var B=u.forwardRef(function(l,g){var a=l.children,n=l.className,C=l.feedback,c=l.feedbackInvalid,m=l.feedbackValid,N=l.floatingClassName,b=l.floatingLabel,j=l.id,r=l.invalid,o=l.label,d=l.plainText,v=l.text,y=l.tooltipFeedback,L=l.valid,D=V(l,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return R.createElement(z,{describedby:D["aria-describedby"],feedback:C,feedbackInvalid:c,feedbackValid:m,floatingClassName:N,floatingLabel:b,id:j,invalid:r,label:o,text:v,tooltipFeedback:y,valid:L},R.createElement("textarea",M({className:H(d?"form-control-plaintext":"form-control",{"is-invalid":r,"is-valid":L},n),id:j},D,{ref:g}),a))});B.propTypes=M({className:q.string,id:q.string,plainText:q.bool},z.propTypes);B.displayName="CFormTextarea";const ae=({fileIndex:l=-1,section:g,values:a,onNewFiles:n,onPreFiels:C,type:c="images"})=>{const[m,N]=u.useState([]),[b,j]=u.useState(a),[r,o]=u.useState(Date.now()),d=(s,i)=>typeof i=="number"?i.toString().padStart(s,"0"):typeof i=="string"?i.padStart(s,"0"):"",v=s=>s.slice((s.lastIndexOf(".")-1>>>0)+2),y=(s,i)=>{let t="";return l===-1?t=`${g}-${T().format("DD-MM-YYYY hh mm ss")}-${d(2,i)}.${v(s)}`:t=`${g}-${l+1}-${T().format("DD-MM-YYYY hh mm ss")}-${d(2,i)}.${v(s)}`,t.replace(/:/g,"-")},L=s=>{var t;let i=(t=s.target)==null?void 0:t.files;S(i)},D=s=>{var t;let i=(t=s.target)==null?void 0:t.files;S(i)},S=s=>{if(b.length>0&&l!==-1){p.warning("Remove previous files before uploading new one!"),o(Date.now());return}if(s.length>1&&l!==-1){p.warning("You can upload only one file here!"),o(Date.now());return}let i=new Array;for(const t of s){let w=i.length??0,k=b.length??0;t.newName=y(t.name,m.length+w+k+1),i.push(t)}N([...m,...i]),n([...m,...i])},Y=s=>{let i=m;i.splice(s,1),o(Date.now());let t=0;for(const w of i){let k=b.length??0;w.newName=y(w.name,t+1+k),t++}N([...i]),n([...i])},$=s=>{let i=a;i.splice(s,1),l===-1?(j([...i]),C([...i])):(j([]),C([]))};u.useEffect(()=>{N([]),j([...a])},[a]),u.useEffect(()=>{},[b]);const A=(s,i=0)=>{if(s===0)return"0 Bytes";let t=1024,w=i<=0?0:i||2,k=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],I=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,I)).toFixed(w))+" "+k[I]};return e.jsx("div",{className:"flex flex-wrap",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"form-group mb-4 choose-image-wrapper text-primary-1000",children:[c==="images"&&e.jsx(f,{htmlFor:"files",className:"block text-gray-700 text-sm font-bold mb-2",children:"Images"}),c==="video"&&e.jsx(f,{htmlFor:"files",className:"block text-gray-700 text-sm font-bold mb-2",children:"Video"}),e.jsx("div",{className:"file-wrapper",children:e.jsxs("div",{className:"container",children:[e.jsx(F,{type:"file",id:"files",name:"files",multiple:!0,accept:`${c==="images"?".jpg, .jpeg, .png, .gif, .webp":".mp4, .webm"}`,onChange:D,onDrop:L,className:`block w-full text-sm text-gray-500\r
                                                            file:mr-4 file:py-2 file:px-4\r
                                                            file:rounded-full file:border-0\r
                                                            file:text-sm file:font-semibold\r
                                                            file:bg-violet-50 file:text-violet-700\r
                                                            hover:file:bg-violet-100`},r),e.jsx("span",{className:"caption  text-primary-1000",children:"Drag and drop files here"})]})})]}),e.jsxs("div",{className:"form-group",children:[c==="images"&&e.jsx("p",{className:"block text-gray-700 text-sm font-bold mb-2 text-primary-1000",children:"Images"}),c==="video"&&e.jsx("p",{className:"block text-gray-700 text-sm font-bold mb-2 text-primary-1000",children:"Video"}),e.jsx("div",{className:"files-list",children:m==null?void 0:m.map((s,i)=>e.jsxs("div",{className:"single-file flex items-center justify-between",children:[e.jsxs("div",{className:"info",children:[e.jsx("h4",{className:"name font-bold",children:s==null?void 0:s.newName}),e.jsx("p",{className:"size text-sm",children:A(s==null?void 0:s.size)})," "]}),e.jsx("button",{type:"button",className:"delete",onClick:()=>Y(i),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"18",viewBox:"0 0 14 18",children:e.jsx("path",{fill:"#000000",fillRule:"nonzero",d:"M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z"})})})]},i))}),e.jsx("div",{className:"files-list",children:a==null?void 0:a.map((s,i)=>e.jsxs("div",{className:"single-file flex items-center justify-between",children:[e.jsx("div",{className:"info",children:e.jsx("a",{className:"name text-blue-600 hover:text-blue-800 visited:text-purple-600",href:s,target:"_blank",rel:"noopener noreferrer",children:s})}),s&&e.jsx("button",{type:"button",className:"delete",onClick:()=>$(i),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"18",viewBox:"0 0 14 18",children:e.jsx("path",{fill:"#000000",fillRule:"nonzero",d:"M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z"})})})]},i))})]})]})})})},fe=()=>{const{id:l}=U(),g=W(),[a,n]=u.useState({_id:"",name:"",description:"",shortDescription:"",category:"",link:"",imgUrl:"",usecase:"",firstName:"",email:"",price:"",isEmployee:!1,registrationLink:"",newfiles:[],preFiles:[]}),[C,c]=u.useState(!1),m=async r=>{try{c(!0);const o=await O(r);o.msg==="no-request"?(p.warning("There is no information!"),c(!1)):n({...o.request,newfiles:[]})}catch(o){p.error(o.response.data)}};u.useEffect(()=>{l&&m(l)},[l]);const N=r=>{n({...a,newfiles:r})},b=r=>{n({...a,preFiles:r})},j=async r=>{var o;if(r.preventDefault(),((o=a==null?void 0:a.newfiles)==null?void 0:o.length)===0&&a.preFiles.length===0){p.warning("Please choose one image for this item!");return}if(!a.category){p.warning("Please choose one category!");return}if(!a.price){p.warning("Please choose one price type!");return}try{let d;a.newfiles&&a.newfiles.length?d=G([...a.newfiles],"images"):d=new FormData,Object.keys(a).forEach(y=>{d.append(y,a[y])}),d.set("preFiles",JSON.stringify(a.preFiles)),c(!0);const v=await K(d);v.msg==="no-section"?(p.warning("There is no information!"),c(!1)):v.msg==="create"?(p.success("New information created!"),g("/tools")):v.msg==="update"&&(p.success("Information updated!"),g("/tools"))}catch(d){p.error(d)}};return e.jsx(J,{children:e.jsx(Z,{xs:12,children:e.jsxs(Q,{className:"mb-4",children:[e.jsx(_,{children:e.jsx("strong",{children:"Add New AI Tool"})}),e.jsxs(X,{children:[e.jsx("p",{className:"text-body-secondary small",children:"You can add new AI Tool manually."}),e.jsxs(ee,{onSubmit:j,children:[e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(F,{placeholder:"Name",id:"name",value:a.name,required:!0,onChange:r=>{n({...a,name:r.target.value})},"aria-label":"Name","aria-describedby":"basic-addon1"}),e.jsx(f,{htmlFor:"name",children:"Name"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(B,{"aria-label":"Description",id:"description",value:a.description,required:!0,onChange:r=>{n({...a,description:r.target.value})},placeholder:"Description"}),e.jsx(f,{htmlFor:"description",children:"Description"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(B,{"aria-label":"Shot Description",id:"shortDescription",value:a.shortDescription,required:!0,onChange:r=>{n({...a,shortDescription:r.target.value})},placeholder:"Description"}),e.jsx(f,{htmlFor:"shortDescription",children:"Short Description"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(E,{id:"category",value:a.category,required:!0,onChange:r=>{n({...a,category:r.target.value})},"aria-label":"Default select example",children:[e.jsx("option",{children:"Select a Category"}),e.jsx("option",{value:"trending",children:"Trending"}),e.jsx("option",{value:"language",children:"Language"}),e.jsx("option",{value:"image",children:"Image Generation"}),e.jsx("option",{value:"writing",children:"Writing"}),e.jsx("option",{value:"audio",children:"Audio"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"data",children:"Data Analysis"}),e.jsx("option",{value:"productivity",children:"Productivity"}),e.jsx("option",{value:"coding",children:"Coding"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(F,{placeholder:"Website Link","aria-label":"Website Link",id:"link",type:"url",value:a.link,required:!0,onChange:r=>{n({...a,link:r.target.value})},"aria-describedby":"basic-addon1"}),e.jsx(f,{htmlFor:"link",children:"Website Link"})]})}),e.jsx(h,{className:"mb-3",children:e.jsx(x,{children:e.jsx(ae,{id:"imgUrl",fileIndex:0,section:`request-${a.name}`,values:a.preFiles,onNewFiles:N,onPreFiels:b})})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(F,{placeholder:"Usecase",id:"usecase",value:a.usecase,required:!0,onChange:r=>{n({...a,usecase:r.target.value})},"aria-label":"Usecase","aria-describedby":"basic-addon1"}),e.jsx(f,{htmlFor:"usecase",children:"Usecase"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(F,{placeholder:"First Name",id:"firstName",value:a.firstName,required:!0,onChange:r=>{n({...a,firstName:r.target.value})},"aria-label":"First Name","aria-describedby":"basic-addon1"}),e.jsx(f,{htmlFor:"firstName",children:"First Name"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(F,{placeholder:"Email",id:"email",type:"email",value:a.email,required:!0,onChange:r=>{n({...a,email:r.target.value})},"aria-label":"Email","aria-describedby":"basic-addon1"}),e.jsx(f,{htmlFor:"email",children:"Email"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsxs(E,{id:"price",value:a.price,required:!0,onChange:r=>{n({...a,price:r.target.value})},"aria-label":"Default select example",children:[e.jsx("option",{children:"Select Price"}),e.jsx("option",{value:"Free",children:"Free"}),e.jsx("option",{value:"Freemium",children:"Freemium"}),e.jsx("option",{value:"Paid",children:"Paid"})]}),e.jsx(f,{htmlFor:"price",children:"Price"})]})}),e.jsx(h,{className:"mb-3",children:e.jsxs(x,{children:[e.jsx(F,{placeholder:"Affiliate Registration Link",id:"registrationLink",type:"url",value:a.registrationLink,required:!0,onChange:r=>{n({...a,registrationLink:r.target.value})},"aria-label":"Affiliate Registration Link","aria-describedby":"basic-addon1"}),e.jsx(f,{htmlFor:"registrationLink",children:"Affiliate Registration Link"})]})}),e.jsxs("div",{className:"d-flex justify-content-end mt-4",children:[e.jsx(P,{color:"primary",type:"submit",style:{fontWeight:"bold",borderRadius:"5px"},children:l?"Update":"Add"}),e.jsx(P,{color:"secondary",className:"me-2 mx-2",style:{fontWeight:"bold",borderRadius:"5px"},onClick:()=>{g("/tools")},children:"Cancel"})]})]})]})]})})})};export{fe as default};
